---
title: "RPart2_Homework_Solutions"
author: "NYC Data Science Academy"
output: html_document
---
## Question #1	

Each new term in the Fibonacci sequence is generated by adding the previous two terms. Starting with 1 and 2, the first 10 Fibonacci numbers are:

1, 2, 3, 5, 8, 13, 21, 34, 55, 89,...

Consider all the Fibonacci numbers whose values do not exceed four million. Find the sum of even-valued terms among them.

```{r}
i = 2
x = 1:2
fib_sum = 0 
while (x[i] < 4e6){
  if (x[i] %% 2 == 0){
    fib_sum = fib_sum + x[i]
  }
  x[i+1] = x[i] + x[i-1]
  i = i + 1
}
fib_sum

# memory-friendly solution
a = 1
b = 2
fib_sum = 0
while (b <4e6){
  if (b %% 2 == 0){
    fib_sum = fib_sum + b
  }
  temp = b
  b = a + b
  a = temp
}
fib_sum
```

## Question #2

Write your own code to implement the multiplication between a matrix and a vector. In case you forget it, here's the definition of matrix multiplication. For an m?n matrix A and an n-dimensional vector x, y = Ax is an m-dimensional vector, where 
\begin{align}y[i] = \sum_{j=1}^nA[i,j]x[j] \text{ for } i = 1,2,3,...m\end{align}

```{r}
mat_times_vec = function(mat, vec) {
  
  #check if mat is a matrix and vec is a vector
  stopifnot(is.matrix(mat), is.numeric(vec), length(vec) > 0, ncol(mat) == length(vec))
  #init variables
  row_count = nrow(mat)
  result =  numeric(row_count)
  for(i in 1:row_count) {
    result[i] = sum(mat[i,] * vec);
  } 
  return (result)
  ### better solution
  # return(c(mat %*% vec))
}

matrixA = matrix(1:12, 3, 4)
matrixA
vectorB = c(1:4)
mat_times_vec(matrixA, vectorB)
```


## Question #3:

Write a function that calculates the median absolute deviation (MAD) of a numeric vector. The median absolute deviation is a robust alternative to standard deviation as a measure of dispersion. For vector X, it is defined as  
$$MAD = median(|X_i-median(X)|)$$
```{r}
my_mad = function(v) {
  return(median(abs(v - median(v)))) 
}
v = rnorm(10)
cat(v)
my_mad(v)
# R has a built-in function MAD, check it out!
# http://www.r-bloggers.com/absolute-deviation-around-the-median/

```


## Question #4: 

Suppose we have a  character vector as follows: `Names <- "John Andrew Thomas"`
Write some R code to obtain the following output:

\begin{align}\text{"John@gmail.com; Andrew@gmail.com; Thomas@gmail.com"}\end{align}

```{r}
Names <- "John Andrew Thomas"
name<-unlist(strsplit(Names,split=' '))
paste(name,"gmail.com",sep="@",collapse = ";")
#sep: a character string to separate the terms.
#collapse: an optional character string to separate the results.

```

## Question #5:

Write R code to generate a vector with the following elements, **without using loops**.

"aa" "ba" "ca" "da" "ea" "ab" "bb" "cb" "db" "eb" "ac" "bc" "cc" "dc" "ec" "ad" "bd" "cd" "dd" "ed" "ae" "be" "ce" "de" "ee"
```{r}
list_letter<-c("a","b","c","d","e")
list1<-rep(list_letter,5)
list2<-rep(list_letter,each=5)
list3<-paste0(list1,list2)
list3

# another solution
list <- c("a","b","c","d","e")
c(sapply(list, paste0, list))
```

## Question #6:

Write an R function named `compare` which takes two words as arguments/inputs and returns "Equal Length" if the number of characters are equal in two words and "Not Equal Length" otherwise. It should work as following: 
```
>>compare("EPS568","Summer") 
"Equal Length"					
>>compare("EPS568","SummerA") 
"Not Equal Length"
```
```{r}
compare <- function(s1, s2){
  return(ifelse(nchar(s1) == nchar(s2), "Equal Length", "Not Equal Length"))
}

compare("EPS568","Summer")
compare("EPS568","SummerA")

```

## Challenge Question:

The game of craps is played as follows:

* Roll two six-sided dice; let x be the sum of the dice on the first roll.
* If x is 7 or 11, you automatically win.
* If x is 2, 3 or 12, you lose.
* If x is any other value (4, 5, 6, 8, 9, 10), x is then called the "point". Continue to re-roll the dice until you either roll the "point" again or a 7. 
    + If you obtain the established point x again, you win.
    + If a 7 is rolled before the point, you lose.


1. Write an R function to play this game once all the way through. You can use the expression 
`x <- sum(sample(1:6, 2, replace=T))` 
to simulate the sum of two rolled dice. The outcome of this expression should be a character element of either "Win" or "Loss".

2. Now, use the R expression you develop in (1), and repeat this game 1000 times hypothetically using a *for loop*. You should save the result of 1000 games in a vector with each element is either "Win" or "Loss". 

```{r}
# 1 (uncomment the print statements if you want to see the game run step-by-step)
game <- function(){
  x <- sum(sample(1:6,2, replace = T))
#  print(paste0('the point is ', x))
  if (x %in% c(2, 3, 12)){
    return("Loss")
  } else if(x %in% c(7, 11)){
    return("Win")
  } else{
    x1 = sum(sample(1:6,2, replace = T))
#    print(paste0('the second roll is ', x1))
    while (x1 != 7 | x1 != x){
      if(x1 == 7){
        return("Loss")
      } else if(x1 == x){
        return("Win")
      } else{
        x1 = sum(sample(1:6,2, replace = T))
#        print(paste0('the next roll is ', x1))
      }
    } 
  }
}

game()

# 2
result = c()
for (i in c(1:1000)){
  result = c(result, game())
}

#view the results
as.data.frame(table(result))

```





